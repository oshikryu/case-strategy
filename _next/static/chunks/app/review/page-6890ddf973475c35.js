(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{9498:function(e,s,t){Promise.resolve().then(t.bind(t,9207))},9207:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var r=t(7437),a=t(2265),i=t(9376),n=t(7765),l=t(5601);function c(){let{userRole:e,setUserRole:s}=(0,n.sy)();return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"View as:"}),(0,r.jsxs)("select",{value:e,onChange:e=>s(e.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"applicant",children:"Applicant"}),(0,r.jsx)("option",{value:"reviewer",children:"Reviewer"})]})]})}var d=t(6337);let o={pending:{label:"Pending",className:"bg-gray-100 text-gray-700"},approved:{label:"Approved",className:"bg-green-100 text-green-800"},rejected:{label:"Rejected",className:"bg-red-100 text-red-800"},changes_requested:{label:"Changes Requested",className:"bg-yellow-100 text-yellow-800"}};function x(e){let{status:s,size:t="md"}=e,a=o[s];return(0,r.jsx)("span",{className:(0,d.cn)("inline-flex items-center rounded-full font-medium",a.className,"sm"===t?"px-2 py-0.5 text-xs":"px-2.5 py-0.5 text-sm"),children:a.label})}function m(){let{getReviewSummary:e,review:s}=(0,n.sy)();if(!s)return null;let t=e(),a=t.approved+t.rejected+t.pending+t.changesRequested,i=a>0?t.approved/a*100:0,l=a>0?t.rejected/a*100:0,c=a>0?t.changesRequested/a*100:0;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Review Progress"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[t.approved," of ",a," criteria approved"]}),t.approved>=3&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Minimum Met"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:(0,r.jsxs)("div",{className:"h-full flex",children:[(0,r.jsx)("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:"".concat(i,"%")}}),(0,r.jsx)("div",{className:"bg-red-500 h-full transition-all duration-300",style:{width:"".concat(l,"%")}}),(0,r.jsx)("div",{className:"bg-yellow-500 h-full transition-all duration-300",style:{width:"".concat(c,"%")}})]})}),(0,r.jsxs)("div",{className:"mt-3 flex gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Approved: ",t.approved]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Rejected: ",t.rejected]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Changes: ",t.changesRequested]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-300"}),"Pending: ",t.pending]})]})]})}function u(e){let{value:s,onChange:t,placeholder:a="Add a comment...",disabled:i=!1}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),(0,r.jsx)("textarea",{value:s,onChange:e=>t(e.target.value),placeholder:a,disabled:i,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500 text-sm"})]})}var h=t(6334);function p(e){let{onStatusChange:s,currentStatus:t,disabled:a=!1}=e;return(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.z,{variant:"approved"===t?"primary":"outline",size:"sm",onClick:()=>s("approved"),disabled:a,className:"approved"===t?"bg-green-600 hover:bg-green-700":"",children:"Approve"}),(0,r.jsx)(h.z,{variant:"changes_requested"===t?"primary":"outline",size:"sm",onClick:()=>s("changes_requested"),disabled:a,className:"changes_requested"===t?"bg-yellow-600 hover:bg-yellow-700":"",children:"Request Changes"}),(0,r.jsx)(h.z,{variant:"rejected"===t?"danger":"outline",size:"sm",onClick:()=>s("rejected"),disabled:a,children:"Reject"})]})}function g(e){let{entry:s,entryReview:t,isReviewer:i,onReviewChange:n,renderEntryContent:l}=e,[c,d]=(0,a.useState)((null==t?void 0:t.comment)||"");return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-3",children:[(0,r.jsx)("div",{className:"flex-1",children:l(s)}),t&&(0,r.jsx)(x,{status:t.status,size:"sm"})]}),(()=>{let e=function(e){var s,t,r,a;if("paystubs"in e||"equityProof"in e||"workLocation"in e){let i=[...(null===(s=e.paystubs)||void 0===s?void 0:s.files)||[],...(null===(t=e.equityProof)||void 0===t?void 0:t.files)||[]],n=[...(null===(r=e.paystubs)||void 0===r?void 0:r.urls)||[],...(null===(a=e.equityProof)||void 0===a?void 0:a.urls)||[]];return i.length>0||n.length>0?{files:i,urls:n}:null}return e.evidence||null}(s);return e&&(0!==e.files.length||0!==e.urls.length)?(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Evidence:"}),(0,r.jsxs)("div",{className:"space-y-1",children:[e.files.map(e=>(0,r.jsxs)("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.name]},e.id)),e.urls.map(e=>(0,r.jsxs)("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline truncate",children:e.description||e.url})]},e.id))]})]}):null})(),i?(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:[(0,r.jsx)(p,{onStatusChange:e=>{null==n||n(s.id,e,c)},currentStatus:(null==t?void 0:t.status)||"pending"}),(0,r.jsx)(u,{value:c,onChange:e=>{d(e),(null==t?void 0:t.status)&&"pending"!==t.status&&(null==n||n(s.id,t.status,e))},placeholder:"Add feedback for this entry..."})]}):(null==t?void 0:t.comment)&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Reviewer Comment:"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:t.comment})]})]})}var j=t(7255);function v(e){let{criterionType:s,criterionState:t,criterionReview:a,isReviewer:i,onClick:n}=e,l=(0,j.g)(s);if(!l)return null;let c=t.entries.length,o=c>0,m=(null==a?void 0:a.status)||"pending";return(0,r.jsxs)("button",{onClick:n,disabled:!o,className:(0,d.cn)("w-full text-left p-4 rounded-lg border transition-all",o?"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm cursor-pointer":"bg-gray-50 border-gray-100 cursor-not-allowed opacity-60"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:l.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:l.shortDescription})]}),(0,r.jsx)("div",{className:"flex flex-col items-end gap-1",children:o&&(0,r.jsx)(x,{status:m,size:"sm"})})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[c," ",1===c?"entry":"entries"]}),(null==a?void 0:a.overallComment)&&!i&&(0,r.jsx)("span",{className:"text-xs text-blue-600",children:"Has feedback"})]}),!o&&(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-400 italic",children:"No entries to review"})]})}var f=t(8702);function y(e){let{criterionType:s,open:t,onClose:i}=e,{criteria:l,review:c,userRole:d,setCriterionReviewStatus:o,setEntryReviewStatus:m}=(0,n.sy)(),v=(0,j.g)(s),y=l[s],N=null==c?void 0:c.criteriaReviews[s],[b,w]=(0,a.useState)((null==N?void 0:N.overallComment)||"");if((0,a.useEffect)(()=>{w((null==N?void 0:N.overallComment)||"")},[null==N?void 0:N.overallComment]),!v)return null;let C="reviewer"===d,k=(e,t,r)=>{m(s,e,t,r)},R=e=>"name"in e&&"organization"in e&&"scope"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.organization}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Scope: ",e.scope," | Date: ",e.date]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.description})]}):"organization"in e&&"requirements"in e&&"status"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.organization}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",e.status]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Requirements: ",e.requirements]})]}):"publication"in e&&"circulation"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.publication}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Circulation: ",e.circulation]})]}):"submissionsCount"in e&&"context"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.role}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.organization}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.submissionsCount," submissions reviewed"]})]}):"impact"in e&&"recognition"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Impact: ",e.impact]})]}):"citations"in e||"doi"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.publication}),e.citations&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.citations," citations"]})]}):"criticalNature"in e&&"responsibilities"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.role}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.company}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.criticalNature})]}):"salary"in e&&"comparativeData"in e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.position}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.company}),e.workLocation&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.workLocation}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.currency," ",e.salary.toLocaleString()," (",e.year,")"]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Entry"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",e.id]})]});return(0,r.jsx)(f.u,{open:t,onOpenChange:e=>!e&&i(),title:v.title,description:v.shortDescription,className:"max-w-3xl",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Overall Status"}),N&&(0,r.jsx)(x,{status:N.status})]}),C?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(p,{onStatusChange:e=>{o(s,e,b)},currentStatus:(null==N?void 0:N.status)||"pending"}),(0,r.jsx)(u,{value:b,onChange:e=>{w(e),(null==N?void 0:N.status)&&"pending"!==N.status&&o(s,N.status,e)},placeholder:"Add overall feedback for this criterion..."})]}):(null==N?void 0:N.overallComment)&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reviewer Comment:"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:N.overallComment})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-900 mb-3",children:["Entries (",y.entries.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:y.entries.map(e=>{let s=null==N?void 0:N.entryReviews.find(s=>s.entryId===e.id);return(0,r.jsx)(g,{entry:e,entryReview:s,isReviewer:C,onReviewChange:k,renderEntryContent:R},e.id)})})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,r.jsx)(h.z,{variant:"secondary",onClick:i,children:"Close"})})]})})}function N(){let{criteria:e,review:s,userRole:t}=(0,n.sy)(),[i,l]=(0,a.useState)(null),c="reviewer"===t,d=[...j.W].sort((s,t)=>{let r=e[s.id].entries.length>0?0:1,a=e[t.id].entries.length>0?0:1;return r!==a?r-a:s.commonality-t.commonality});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(t=>(0,r.jsx)(v,{criterionType:t.id,criterionState:e[t.id],criterionReview:null==s?void 0:s.criteriaReviews[t.id],isReviewer:c,onClick:()=>l(t.id)},t.id))}),i&&(0,r.jsx)(y,{criterionType:i,open:!!i,onClose:()=>l(null)})]})}function b(){let e=(0,i.useRouter)(),{demographics:s,applicationSubmittedForReview:t,getCompletedCriteriaCount:d,userRole:o}=(0,n.sy)(),[x,u]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{u(!0)},[]),(0,a.useEffect)(()=>{x&&!s&&e.push("/")},[x,s,e]),(0,a.useEffect)(()=>{x&&s&&!t&&e.push("/criteria")},[x,s,t,e]),!x||!s||!t)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});let h=d(),p="reviewer"===o;return(0,r.jsx)("div",{className:"py-8 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)(l.y,{currentStep:"review",completedCriteria:h}),(0,r.jsx)(c,{})]}),(0,r.jsxs)("div",{className:"mt-8 mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:p?"Review Application":"Application Review Status"}),(0,r.jsx)("p",{className:"text-gray-600",children:p?"Review each criterion and provide feedback. Approve, reject, or request changes for each item.":"View the status of your application review. Click on a criterion to see detailed feedback."})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(m,{})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Criteria"}),(0,r.jsx)(N,{})]})]})})}},5601:function(e,s,t){"use strict";t.d(s,{y:function(){return c}});var r=t(7437),a=t(7648),i=t(6337),n=t(7765);let l=[{id:"demographics",label:"Demographics",href:"/"},{id:"recommendations",label:"Recommendations",href:"/recommendations"},{id:"criteria",label:"Criteria",href:"/criteria"},{id:"review",label:"Review",href:"/review"}];function c(e){let{currentStep:s,completedCriteria:t}=e,{applicationSubmittedForReview:c}=(0,n.sy)(),d=l.findIndex(e=>e.id===s);return(0,r.jsx)("nav",{className:"flex items-center space-x-2 text-sm",children:l.map((e,n)=>{let l=n<d,o=e.id===s,x="review"===e.id;return(0,r.jsxs)("div",{className:"flex items-center",children:[n>0&&(0,r.jsx)("svg",{className:"w-4 h-4 mx-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),x&&c||n<=d?(0,r.jsxs)(a.default,{href:e.href,className:(0,i.cn)("flex items-center",o?"text-blue-600 font-medium":l?"text-gray-900 hover:text-blue-600":"text-gray-500"),children:[l&&(0,r.jsx)("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.label,"criteria"===e.id&&(0,r.jsxs)("span",{className:"ml-1 text-gray-400",children:["(",t,"/3)"]})]}):(0,r.jsx)("span",{className:"text-gray-400 cursor-not-allowed",children:e.label})]},e.id)})})}}},function(e){e.O(0,[883,428,648,263,720,971,117,744],function(){return e(e.s=9498)}),_N_E=e.O()}]);